---
import { HOST } from '#constants/data'
import SnippetLayout from '#containers/snippets/SnippetLayout.astro'
import Layout from '#layout'
import type { GetStaticPaths } from 'astro'
import { getCollection, type CollectionEntry } from 'astro:content'

export const getStaticPaths: GetStaticPaths = async () => {
  const snippets = await getCollection('snippets')
  return snippets.map(snippet => ({
    params: { id: snippet.slug },
    props: { snippet: snippet },
  }))
}

export interface Props {
  snippet: CollectionEntry<'snippets'>
}

const { snippet } = Astro.props

const image = `${HOST}/og/posts/${snippet.slug}.svg`
---

<Layout image={image}>
  <SnippetLayout payload={snippet}>
    <h1>{snippet.data.title}</h1>
  </SnippetLayout>
</Layout>

<style>
  h1 {
    font-size: 2.4em;
  }
</style>
